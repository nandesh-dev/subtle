syntax = "proto3";

package media;

import 'proto/subtitle/subtitle.proto';

option go_package = "github.com/nandesh-dev/subtle/generated/proto/media";

service MediaService {
  rpc GetDirectory(GetDirectoryRequest) returns (GetDirectoryResponse);
  rpc GetVideo(GetVideoRequest) returns (GetVideoResponse);
}

message GetVideoRequest {
  string directoryPath = 1;
  string name = 2;
  string extension = 3;
}

message GetVideoResponse {
  repeated subtitle.Subtitle subtitles = 1;
  repeated RawStream raw_streams = 2;
}

message RawStream {
  int32 index = 1;
  string format = 2;
  string language = 3;
  string title = 4;
}

message GetDirectoryRequest {
  string path = 1;
}

message Video {
  string name = 1;
  string extension = 2;
}

message Directory {
  string path = 1;
  string name = 2;
}

message GetDirectoryResponse {
  repeated Directory directories = 1;
  repeated Video videos = 2;
}
